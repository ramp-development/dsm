"use strict";(()=>{var f=e=>{let t="data-chart-item",r=e.querySelector(`[${t}="chart"]`),n=e.querySelector(`[${t}="list"]`),o=[...n.querySelectorAll(`[${t}="item"]`)],s=o.map(l=>l.querySelector(`[${t}="value"]`).textContent),p=s.reduce((l,i)=>Number(l)+Number(i)),m=o.map((l,i)=>{let c=l.querySelector(`[${t}="label"]`);return`${Math.round(s[i]/p*100)}% ${c.textContent}`}),d=o.map(l=>{let i=l.querySelector(`[${t}="background-colour"]`);return window.getComputedStyle(i).getPropertyValue("background-color")}),E=new Chart(r,{type:"doughnut",options:{responsive:!0,maintainAspectRatio:!0,cutout:"75%",plugins:{legend:{display:!1}}},data:{labels:m,datasets:[{label:e.dataset.chartLabel,backgroundColor:d,data:s}]}})};var u=(e,t)=>(Array.isArray(t)||(t=[t]),t.map(n=>e.dispatchEvent(new Event(n,{bubbles:!0}))).every(n=>n));var S=()=>{let e=document.querySelector('[data-disclaimer="component"]');if(!e)return;let t=!1,r=e.querySelector('select[data-disclaimer="select"]'),n=e.querySelector('[data-disclaimer="open"]'),o=e.querySelector('[data-disclaimer="decline"]'),s=e.querySelector('[data-disclaimer="agree"]'),p=["United Kingdom","Guernsey","Isle of Man","Jersey","Sweden","The Republic of Ireland"];if(sessionStorage.getItem("disclaimer"))return;u(n,"click"),document.body.style.overflow="hidden";let m=(c,a)=>{c.style.opacity=a?"1":"0.5",c.style.pointerEvents=a?"auto":"none",c.setAttribute("tabindex",a?"0":"-1"),t=a};m(o,!0),m(s,!1);let d={element:r,next:o,previous:o},E={element:o,next:r,previous:r},l={element:s,next:r,previous:o},i=[d,E,l];setTimeout(()=>{i[0].element.focus(),i.forEach(c=>{c.element.addEventListener("keydown",a=>{a.which===9&&(a.preventDefault(),a.shiftKey||c.next.focus(),a.shiftKey&&c.previous.focus())})})},500),r.addEventListener("change",()=>{m(s,p.includes(r.value)),d.previous=t?s:o,E.next=t?s:r}),s.addEventListener("keyup",c=>{c.which===13&&u(s,"click")}),o.addEventListener("keyup",c=>{c.which===13&&u(o,"click")}),s.addEventListener("click",()=>{t&&(sessionStorage.setItem("disclaimer","true"),document.body.style.removeProperty("overflow"),setTimeout(()=>{e.remove()},350))}),o.addEventListener("click",()=>{window.location.replace("https://www.downing.co.uk/")})};var x=()=>{let e=document.querySelector(".nav_component");e&&(window.scrollY>=64&&e.classList.add("is-scrolled"),window.addEventListener("scroll",()=>{window.scrollY>=64?e.classList.add("is-scrolled"):e.classList.remove("is-scrolled")}))};var y=e=>{setTimeout(()=>{e.forEach(t=>{let r=t.querySelector('[data-read-more="text"]'),n=t.querySelector('[data-read-more="trigger"]');r.scrollHeight>r.offsetHeight?n.addEventListener("click",()=>{r.classList.toggle("text-style-3lines"),n.textContent=n.textContent==="Read more"?"Read less":"Read more"}):n.remove()})},250)};var T=()=>{let e=document.querySelector(".collection-wrapper"),t=e==null?void 0:e.querySelector('form [fs-cmsfilter-element="reset"]'),r=e==null?void 0:e.querySelector('.resources_empty [fs-cmsfilter-element="reset"]');r==null||r.addEventListener("click",()=>{u(t,"click")})};var A=e=>{fetch("https://sheets.googleapis.com/v4/spreadsheets/1OYBLYVjn0Jw9cZRLnd6IR6_c-BSsm70U_mF-ik7ZUkA/values:batchGet?ranges=%27Stock%20Prices%27&key=AIzaSyA3pHt2H6BylgOG1NNGrr_3UUQVOZrbisI").then(o=>o.json()).then(o=>{let s=o.valueRanges[0].values;e.forEach(p=>{let m=p.dataset.ticker,d=s[0].indexOf(m);d!==-1&&(p.textContent=s[1][d])})})};window.Webflow||(window.Webflow=[]);window.Webflow.push(()=>{S(),x();let e=[...document.querySelectorAll("[data-ticker]")];e.length>0&&A(e);let{pathname:t}=window.location;t.includes("the-company")&&[...document.querySelectorAll('[data-chart-item="wrapper"]')].forEach(o=>{f(o)});let r=[...document.querySelectorAll('[data-read-more="wrapper"]')];r.length!==0&&y(r),t.includes("resources")&&T()});})();
