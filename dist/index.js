"use strict";(()=>{var E=e=>{let t="data-chart-item",r=e.querySelector(`[${t}="chart"]`),o=e.querySelector(`[${t}="list"]`),n=[...o.querySelectorAll(`[${t}="item"]`)],l=n.map(c=>c.querySelector(`[${t}="value"]`).textContent),p=l.reduce((c,i)=>Number(c)+Number(i)),d=n.map((c,i)=>{let s=c.querySelector(`[${t}="label"]`);return`${Math.round(l[i]/p*100)}% ${s.textContent}`}),u=n.map(c=>{let i=c.querySelector(`[${t}="background-colour"]`);return window.getComputedStyle(i).getPropertyValue("background-color")}),f=new Chart(r,{type:"doughnut",options:{responsive:!0,maintainAspectRatio:!0,cutout:"75%",plugins:{legend:{display:!1}}},data:{labels:d,datasets:[{label:e.dataset.chartLabel,backgroundColor:u,data:l}]}})};var m=(e,t)=>(Array.isArray(t)||(t=[t]),t.map(o=>e.dispatchEvent(new Event(o,{bubbles:!0}))).every(o=>o));var S=()=>{let e=document.querySelector('[data-disclaimer="component"]');if(!e)return;let t=!1,r=e.querySelector('select[data-disclaimer="select"]'),o=e.querySelector('[data-disclaimer="open"]'),n=e.querySelector('[data-disclaimer="decline"]'),l=e.querySelector('[data-disclaimer="agree"]'),p=["United Kingdom","Guernsey","Isle of Man","Jersey","Sweden","The Republic of Ireland"];if(sessionStorage.getItem("disclaimer"))return;m(o,"click"),document.body.style.overflow="hidden";let d=(s,a)=>{s.style.opacity=a?"1":"0.5",s.style.pointerEvents=a?"auto":"none",s.setAttribute("tabindex",a?"0":"-1"),t=a};d(n,!0),d(l,!1);let u={element:r,next:n,previous:n},f={element:n,next:r,previous:r},c={element:l,next:r,previous:n},i=[u,f,c];setTimeout(()=>{i[0].element.focus(),i.forEach(s=>{s.element.addEventListener("keydown",a=>{a.which===9&&(a.preventDefault(),a.shiftKey||s.next.focus(),a.shiftKey&&s.previous.focus())})})},500),r.addEventListener("change",()=>{d(l,p.includes(r.value)),u.previous=t?l:n,f.next=t?l:r}),l.addEventListener("keyup",s=>{s.which===13&&m(l,"click")}),n.addEventListener("keyup",s=>{s.which===13&&m(n,"click")}),l.addEventListener("click",()=>{t&&(sessionStorage.setItem("disclaimer","true"),document.body.style.removeProperty("overflow"),setTimeout(()=>{e.remove()},350))}),n.addEventListener("click",()=>{window.location.replace("https://www.downing.co.uk/")})};var x=()=>{let e=document.querySelector(".nav_component");e&&(window.scrollY>=64&&e.classList.add("is-scrolled"),window.addEventListener("scroll",()=>{window.scrollY>=64?e.classList.add("is-scrolled"):e.classList.remove("is-scrolled")}))};var y=e=>{setTimeout(()=>{e.forEach(t=>{let r=t.querySelector('[data-read-more="text"]'),o=t.querySelector('[data-read-more="trigger"]');r.scrollHeight>r.offsetHeight?o.addEventListener("click",()=>{r.classList.toggle("text-style-3lines"),o.textContent=o.textContent==="Read more"?"Read less":"Read more"}):o.remove()})},250)};var L=()=>{let e=document.querySelector(".collection-wrapper"),t=e==null?void 0:e.querySelector('form [fs-cmsfilter-element="reset"]'),r=e==null?void 0:e.querySelector('.resources_empty [fs-cmsfilter-element="reset"]');r==null||r.addEventListener("click",()=>{m(t,"click")})};window.Webflow||(window.Webflow=[]);window.Webflow.push(()=>{S(),x();let{pathname:e}=window.location;e.includes("the-company")&&[...document.querySelectorAll('[data-chart-item="wrapper"]')].forEach(o=>{E(o)});let t=[...document.querySelectorAll('[data-read-more="wrapper"]')];t.length!==0&&y(t),e.includes("resources")&&L()});})();
